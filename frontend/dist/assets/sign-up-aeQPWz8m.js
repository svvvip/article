import{r as h,b as g,j as s,c as w,B as F,o as b,t as C,s as a}from"./index-B01K6LtN.js";import{C as S,a as P,b as I,c as N}from"./card-C8S_LLSC.js";import{A as L}from"./auth-layout-CYtkX4B1.js";import{u as v,F as y,a as n,b as t,c as i,d as m,e as c}from"./form-CxRSSxqG.js";import{a as A}from"./zod-C1KCSxpg.js";import{r as B}from"./user-CRSCMw9j.js";import{I as E}from"./input-c0Q4JQol.js";import{P as p}from"./password-input-DE0wRYst.js";import"./newspaper-DWNG5Kd-.js";import"./createLucideIcon-CCBfe0vc.js";import"./index-C2uM0dkt.js";import"./request-2_miQ1pQ.js";import"./eye-Bvpb1x--.js";const U=b({username:a(),password:a().min(8,"至少8位密码"),confirmPassword:a().min(1,"再次输入密码")}).refine(e=>e.password===e.confirmPassword,{message:"两个密码不一致",path:["confirmPassword"]});function k({className:e,...x}){const[j,d]=h.useState(!1),u=g(),o=v({resolver:A(U),defaultValues:{username:"",password:"",confirmPassword:""}});async function f(r){d(!0);const l=await B(r);d(!1),l.code===0?await u({to:"/sign-in",replace:!0}):C.error(l.message)}return s.jsx(y,{...o,children:s.jsxs("form",{onSubmit:o.handleSubmit(f),className:w("grid gap-3",e),...x,children:[s.jsx(n,{control:o.control,name:"username",render:({field:r})=>s.jsxs(t,{children:[s.jsx(i,{children:"用户名"}),s.jsx(m,{children:s.jsx(E,{...r})}),s.jsx(c,{})]})}),s.jsx(n,{control:o.control,name:"password",render:({field:r})=>s.jsxs(t,{children:[s.jsx(i,{children:"密码"}),s.jsx(m,{children:s.jsx(p,{placeholder:"********",...r})}),s.jsx(c,{})]})}),s.jsx(n,{control:o.control,name:"confirmPassword",render:({field:r})=>s.jsxs(t,{children:[s.jsx(i,{children:"确认密码"}),s.jsx(m,{children:s.jsx(p,{placeholder:"********",...r})}),s.jsx(c,{})]})}),s.jsx(F,{className:"mt-2",disabled:j,children:"创建账号"})]})})}function H(){return s.jsx(L,{children:s.jsxs(S,{className:"gap-4",children:[s.jsx(P,{children:s.jsx(I,{className:"text-lg tracking-tight",children:"账号创建"})}),s.jsx(N,{children:s.jsx(k,{})})]})})}const X=H;export{X as component};
