import{l as P,m as G,n as W,r as p,j as e,c as E,h as J,o as U,t as v,B as g,s as M,p as X}from"./index-B01K6LtN.js";import{u as Y}from"./index-BaKbMfrS.js";import{R as Z,I as ee,a as se,b as ae,H as te,S as re,T as ne,C as ie}from"./theme-switch-Cj3HdUhw.js";import{I as oe,M as le}from"./image-mode-switch-r2FRk6wG.js";import{Q as ce,a as de,u as y}from"./useQuery-DrhposrY.js";import{d as me,m as he,a as V,g as A}from"./article-cPZ4_sKF.js";import{C as xe,y as D,x as ue}from"./dropdown-menu-C5nmmplu.js";import{B as F}from"./badge-CnpEfJTD.js";import{C as pe}from"./card-C8S_LLSC.js";import{R as Q}from"./response-modal-_P3EDDAe.js";import{u as fe,f as ge,F as je,a as _,b as $,c as S,d as z,L as N,e as R,g as ve}from"./form-CxRSSxqG.js";import{a as ye}from"./zod-C1KCSxpg.js";import{u as Ne}from"./useMutation-DrK_Az29.js";import{f as be}from"./config-DY6TxoJ-.js";import{c as u}from"./createLucideIcon-CCBfe0vc.js";import{S as B}from"./scroll-area-QD9Lh6Qq.js";import{C as b}from"./check-BMIXQX84.js";import{D as C}from"./download-B99peeGY.js";import{a as we,C as ke}from"./pagination-CpkMZhyM.js";import{C as Ce}from"./clock-CxH_gih8.js";import{T as Pe,a as Me,b as q}from"./tabs-BzFi7Z-H.js";import{L as I}from"./loader-circle-CqpSi6VW.js";import"./index-WrHNe2I8.js";import"./index-CWOWhum8.js";import"./index-BWB9MiGf.js";import"./index-Dx9d1UQ8.js";import"./separator-6OHr6uP3.js";import"./index-C2uM0dkt.js";import"./eye-Bvpb1x--.js";import"./request-2_miQ1pQ.js";import"./newspaper-DWNG5Kd-.js";import"./arrow-right-DSH9sgvw.js";import"./index-BdQq_4o_.js";var Fe=class extends ce{constructor(s,r){super(s,r)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(s){super.setOptions({...s,behavior:P()})}getOptimisticResult(s){return s.behavior=P(),super.getOptimisticResult(s)}fetchNextPage(s){return this.fetch({...s,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(s){return this.fetch({...s,meta:{fetchMore:{direction:"backward"}}})}createResult(s,r){const{state:t}=s,i=super.createResult(s,r),{isFetching:l,isRefetching:x,isError:m,isRefetchError:c}=i,h=t.fetchMeta?.fetchMore?.direction,f=m&&h==="forward",d=l&&h==="forward",a=m&&h==="backward",n=l&&h==="backward";return{...i,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:W(r,t.data),hasPreviousPage:G(r,t.data),isFetchNextPageError:f,isFetchingNextPage:d,isFetchPreviousPageError:a,isFetchingPreviousPage:n,isRefetchError:c&&!f&&!a,isRefetching:x&&!d&&!n}}};function _e(s,r){return de(s,Fe)}const $e=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Se=u("calendar",$e);const ze=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Re=u("circle",ze);const qe=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Ie=u("copy",qe);const Le=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Te=u("external-link",Le);const Ee=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]],Ve=u("file-question-mark",Ee);const Ae=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],De=u("folder-open",Ae);const Qe=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],L=u("hard-drive",Qe);const Be=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],w=u("image",Be);const He=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Ke=u("package",He);const Oe=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Ge=u("refresh-cw",Oe);function H(s,r=300){const[t,i]=p.useState(s);return p.useEffect(()=>{const l=setTimeout(()=>{i(s)},r);return()=>clearTimeout(l)},[s,r]),t}function T({className:s,...r}){return e.jsx(Z,{"data-slot":"radio-group",className:E("grid gap-3",s),...r})}function k({className:s,...r}){return e.jsx(ee,{"data-slot":"radio-group-item",className:E("aspect-square size-4 shrink-0 rounded-full border border-input text-primary shadow-xs transition-[color,box-shadow] outline-none focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50 disabled:cursor-not-allowed disabled:opacity-50 aria-invalid:border-destructive aria-invalid:ring-destructive/20 dark:bg-input/30 dark:aria-invalid:ring-destructive/40",s),...r,children:e.jsx(se,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:e.jsx(Re,{className:"absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2 fill-primary"})})})}const We=U({downloader:M().min(1,"è¯·é€‰æ‹©ä¸‹è½½å™¨"),savePath:M().min(1,"è¯·é€‰æ‹©ä¸‹è½½ç›®å½•")});function Je({articleId:s}){const[r,t]=p.useState(!1),i=J(),{data:l,isLoading:x}=y({queryKey:["downloaders"],queryFn:async()=>(await be()).data,staleTime:300*1e3,enabled:r}),m=fe({resolver:ye(We),defaultValues:{downloader:"auto",savePath:"auto"}}),c=ge({control:m.control,name:"downloader"}),h=l?.find(a=>a.id===c),f=()=>{i.setQueriesData({queryKey:["articles"],exact:!1},a=>a&&{...a,items:a.items.map(n=>n.tid===s?{...n,in_stock:!0}:n)})},d=Ne({mutationFn:async a=>c==="auto"?await me(s):await he(s,a.downloader,a.savePath),onSuccess:a=>{a.code===0&&(v.success(a.message),t(!1),m.reset(),f())},onError:a=>{v.error(`æŽ¨é€å¤±è´¥ï¼Œè¯·é‡è¯•:${a}`)}});return e.jsx(Q,{open:r,onOpenChange:t,title:"é€‰æ‹©ä¸‹è½½å™¨",description:"é€‰æ‹©è¦ä½¿ç”¨çš„ä¸‹è½½å™¨å’Œä¿å­˜ç›®å½•",trigger:e.jsxs(g,{size:"sm",variant:"outline",className:"flex-1 shadow-md transition-all hover:shadow-lg sm:w-28 sm:flex-none",children:[e.jsx(C,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"æŽ¨é€ä¸‹è½½"}),e.jsx("span",{className:"sm:hidden",children:"ä¸‹è½½"})]}),children:x?e.jsx("div",{className:"flex h-48 items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-2 text-muted-foreground",children:[e.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"}),e.jsx("p",{className:"text-sm",children:"åŠ è½½é…ç½®ä¸­..."})]})}):l?.length===0?e.jsxs("div",{className:"flex h-48 flex-col items-center justify-center gap-2 text-muted-foreground",children:[e.jsx(L,{className:"h-12 w-12 opacity-30"}),e.jsx("p",{className:"text-sm",children:"æœªé…ç½®ä»»ä½•ä¸‹è½½å™¨"}),e.jsx("p",{className:"text-xs",children:"è¯·å…ˆåœ¨è®¾ç½®ä¸­é…ç½®ä¸‹è½½å™¨"})]}):e.jsx(je,{...m,children:e.jsxs("form",{onSubmit:m.handleSubmit(a=>d.mutate(a)),className:"space-y-6 py-4",children:[e.jsx(_,{control:m.control,name:"downloader",render:({field:a})=>e.jsxs($,{className:"space-y-2",children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-4 w-4"}),"ä¸‹è½½å™¨"]}),e.jsx(z,{children:e.jsxs(T,{onValueChange:n=>{if(a.onChange(n),n==="auto")m.setValue("savePath","auto");else{const o=l?.find(j=>j.id===n);o&&o.save_paths.length>0&&m.setValue("savePath",o.save_paths[0].path)}},value:a.value,className:"space-y-2",children:[e.jsxs("div",{className:`flex items-center space-x-3 rounded-lg border p-3 transition-all ${a.value==="auto"?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:[e.jsx(k,{value:"auto",id:"auto"}),e.jsxs(N,{htmlFor:"auto",className:"flex flex-1 cursor-pointer items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"font-medium",children:"ðŸŽ¯ è‡ªåŠ¨é€‰æ‹©ï¼ˆæŽ¨èï¼‰"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"ç”±æœåŠ¡ç«¯è‡ªåŠ¨åˆ¤æ–­æœ€ä½³ä¸‹è½½å™¨å’Œç›®å½•"})]}),a.value==="auto"&&e.jsx(b,{className:"h-4 w-4 flex-shrink-0 text-primary"})]})]}),l?.map(n=>e.jsxs("div",{className:`flex items-center space-x-3 rounded-lg border p-3 transition-all ${a.value===n.id?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:[e.jsx(k,{value:n.id,id:n.id}),e.jsxs(N,{htmlFor:n.id,className:"flex flex-1 cursor-pointer items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:n.id}),a.value===n.id&&e.jsx(b,{className:"h-4 w-4 text-primary"})]})]},n.id))]})}),e.jsx(R,{})]})}),c!=="auto"&&h&&e.jsx(e.Fragment,{children:e.jsx(_,{control:m.control,name:"savePath",render:({field:a})=>e.jsxs($,{className:"space-y-2",children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(De,{className:"h-4 w-4"}),"ä¸‹è½½ç›®å½•",e.jsxs("span",{className:"text-xs font-normal text-muted-foreground",children:["(",h.save_paths.length," ä¸ªå¯ç”¨ç›®å½•)"]})]}),e.jsx(z,{children:e.jsx(B,{className:"h-[160px] rounded-md border",children:e.jsx(T,{onValueChange:a.onChange,value:a.value,className:"p-2",children:h.save_paths.map((n,o)=>e.jsxs("div",{className:`flex items-start space-x-3 rounded-md p-3 transition-all ${a.value===n.path?"bg-primary/10":"hover:bg-muted/50"}`,children:[e.jsx(k,{value:n.path,id:`path-${o}`,className:"mt-0.5"}),e.jsx(N,{htmlFor:`path-${o}`,className:"flex flex-1 cursor-pointer flex-col gap-1",children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("span",{className:"font-mono text-sm break-all",children:n.path}),a.value===n.path&&e.jsx(b,{className:"h-4 w-4 flex-shrink-0 text-primary"})]})})]},o))})})}),e.jsx(ve,{children:"é€‰æ‹©æ–‡ä»¶ä¿å­˜çš„ç›®æ ‡ç›®å½•"}),e.jsx(R,{})]})})}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(g,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:d.isPending,children:"å–æ¶ˆ"}),e.jsx(g,{type:"submit",disabled:d.isPending,children:d.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),"æŽ¨é€ä¸­..."]}):e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"mr-2 h-4 w-4"}),"ç¡®è®¤æŽ¨é€"]})})]})]})})})}function K({article:s}){const{mode:r}=X(),t=s.preview_images.split(",").filter(Boolean),[i,l]=p.useState(0),[x,m]=p.useState(!1),c=async()=>{try{await navigator.clipboard.writeText(s.magnet),v.success("ç£åŠ›é“¾æŽ¥å·²å¤åˆ¶")}catch(d){v.error(`å¤åˆ¶å¤±è´¥:${d}`)}},h=()=>{l(d=>d===t.length-1?0:d+1)},f=()=>{l(d=>d===0?t.length-1:d-1)};return e.jsxs(pe,{className:"group glass-card relative flex w-full max-w-full flex-col gap-4 overflow-hidden rounded-2xl p-4 transition-all duration-300 sm:flex-row",children:[e.jsx("div",{className:"absolute top-0 left-0 h-1 w-full bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 opacity-0 transition-opacity duration-300 group-hover:opacity-100"}),e.jsx(Q,{title:"å›¾ç‰‡é¢„è§ˆ",trigger:r!=="hide"&&e.jsx("div",{className:"relative h-48 w-full cursor-pointer overflow-hidden rounded-xl sm:h-32 sm:w-48 sm:flex-shrink-0",children:!x&&t.length>0?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:t[0],alt:s.title,className:`h-full w-full object-cover transition-all duration-500 group-hover:scale-110 ${r==="blur"?"blur-md":""}`,onError:()=>m(!0)}),t.length>1&&e.jsxs("div",{className:"absolute bottom-2 right-2 flex items-center gap-1 rounded-full bg-black/70 px-2 py-1 text-xs text-white backdrop-blur-sm",children:[e.jsx(w,{className:"h-3 w-3"}),t.length]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30 opacity-0 transition-opacity duration-300 group-hover:opacity-100",children:e.jsx("div",{className:"rounded-full bg-white/20 p-3 backdrop-blur-sm",children:e.jsx(w,{className:"h-6 w-6 text-white"})})})]}):e.jsx("div",{className:"flex h-full w-full items-center justify-center bg-muted",children:e.jsx(w,{className:"h-12 w-12 text-muted-foreground/30"})})}),children:e.jsxs("div",{className:"relative rounded-lg bg-black/95 p-4",children:[e.jsx("img",{src:t[i],alt:`${s.title}-${i}`,className:"max-h-[80vh] max-w-[90vw] rounded-lg object-contain"}),t.length>1&&e.jsxs(e.Fragment,{children:[e.jsx(g,{size:"icon",variant:"ghost",onClick:f,className:"absolute top-1/2 left-2 -translate-y-1/2 rounded-full bg-black/60 text-white hover:bg-black/80 hover:text-white",children:e.jsx(we,{className:"h-6 w-6"})}),e.jsx(g,{size:"icon",variant:"ghost",onClick:h,className:"absolute top-1/2 right-2 -translate-y-1/2 rounded-full bg-black/60 text-white hover:bg-black/80 hover:text-white",children:e.jsx(xe,{className:"h-6 w-6"})}),e.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 rounded-full bg-black/60 px-3 py-1 text-sm text-white backdrop-blur-sm",children:[i+1," / ",t.length]})]}),t.length>1&&e.jsx("div",{className:"mt-4 flex gap-2 overflow-x-auto pb-2 scrollbar-thin",children:t.map((d,a)=>e.jsx("button",{onClick:()=>l(a),className:`h-16 w-16 flex-shrink-0 overflow-hidden rounded-lg border-2 transition-all ${i===a?"scale-110 border-primary shadow-lg":"border-white/20 opacity-60 hover:opacity-100"}`,children:e.jsx("img",{src:d,alt:`preview-${a}`,className:"h-full w-full object-cover"})},a))})]})}),e.jsxs("div",{className:"flex min-w-0 flex-1 flex-col gap-3",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[e.jsx(F,{variant:"secondary",className:"shadow-sm",children:s.section}),s.category&&e.jsx(F,{variant:"outline",className:"shadow-sm",children:s.category}),e.jsxs("span",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(Se,{className:"h-3 w-3"}),s.publish_date]})]}),e.jsx("h6",{className:"line-clamp-2 break-words text-base font-semibold leading-snug transition-colors group-hover:text-primary sm:text-sm",children:s.title}),e.jsxs("div",{className:"mt-auto flex flex-wrap items-center gap-2 text-xs",children:[s.size&&e.jsxs("span",{className:"flex items-center gap-1 rounded-full bg-muted px-2.5 py-1 font-medium",children:[e.jsx(Ke,{className:"h-3 w-3"}),s.size," MB"]}),e.jsx("span",{className:`flex items-center gap-1 rounded-full px-2.5 py-1 font-medium ${s.in_stock?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400"}`,children:s.in_stock?e.jsxs(e.Fragment,{children:[e.jsx(ae,{className:"h-3 w-3"}),"å·²ä¸‹è½½"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ce,{className:"h-3 w-3"}),"æœªä¸‹è½½"]})}),s.detail_url&&e.jsxs("a",{href:s.detail_url,target:"_blank",rel:"noopener noreferrer",className:"ml-auto flex items-center gap-1 text-muted-foreground transition-colors hover:text-primary",children:[e.jsx(Te,{className:"h-3 w-3"}),e.jsx("span",{className:"text-xs",children:"è¯¦æƒ…"})]})]})]}),e.jsxs("div",{className:"flex w-full gap-2 sm:w-auto sm:flex-col sm:justify-center",children:[e.jsxs(g,{size:"sm",variant:"default",className:"flex-1 gap-2 shadow-md transition-all hover:shadow-lg sm:w-28 sm:flex-none",onClick:c,children:[e.jsx(Ie,{className:"h-4 w-4"}),e.jsx("span",{children:"å¤åˆ¶"})]}),e.jsx(Je,{articleId:s.tid,trigger:e.jsxs(g,{size:"sm",variant:"outline",className:"flex-1 gap-2 shadow-md transition-all hover:shadow-lg sm:w-28 sm:flex-none",children:[e.jsx(C,{className:"h-4 w-4"}),e.jsx("span",{children:"ä¸‹è½½"})]})})]})]})}function O({value:s,categories:r,onChange:t}){return e.jsx(B,{className:"mb-2 w-full",type:"hover",orientation:"horizontal",children:e.jsx(Pe,{value:s.section||"all",onValueChange:i=>t({...s,section:i==="all"?"":i}),children:e.jsxs(Me,{children:[e.jsx(q,{value:"all",children:"å…¨éƒ¨"}),r.map(i=>e.jsx(q,{value:i.name,children:i.name},i.name))]})})})}function Ue(){const{keyword:s}=D(),r=H(s,300),[t,i]=p.useState({page:1,page_size:10,keyword:"",section:""}),l=p.useRef(null),{data:x,fetchNextPage:m,hasNextPage:c,isFetchingNextPage:h,isLoading:f}=_e({queryKey:["articles-infinite",t,r],queryFn:async({pageParam:o=1})=>(await V({...t,page:o,keyword:r})).data,getNextPageParam:o=>o.hasMore?o.page+1:void 0,initialPageParam:1,staleTime:300*1e3}),{data:d}=y({queryKey:["category"],queryFn:async()=>(await A()).data,staleTime:300*1e3});p.useEffect(()=>{if(!l.current)return;const o=new IntersectionObserver(([j])=>{j.isIntersecting&&c&&!h&&m()},{root:null,rootMargin:"100px"});return o.observe(l.current),()=>o.disconnect()},[c,h,m]);const a=x?.pages.flatMap(o=>o.items)||[],n=x?.pages[0]?.total||0;return e.jsxs("div",{className:"flex h-full flex-col overflow-hidden",children:[e.jsx("div",{className:"sticky top-0 z-30 mb-2",children:e.jsx(O,{value:t,categories:d||[],onChange:o=>i(o)})}),e.jsxs("div",{className:"flex-1 overflow-auto",children:[e.jsx("div",{className:"grid gap-2",children:a.map(o=>e.jsx(K,{article:o},o.tid))}),e.jsxs("div",{ref:l,className:"py-4 text-center",children:[h&&e.jsxs("div",{className:"flex items-center justify-center gap-2 text-muted-foreground",children:[e.jsx(I,{className:"h-5 w-5 animate-spin"}),e.jsx("span",{children:"åŠ è½½ä¸­..."})]}),!c&&a.length>0&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:["å·²åŠ è½½å…¨éƒ¨ ",n," æ¡æ•°æ®"]})]}),f&&e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(I,{className:"h-6 w-6 animate-spin text-muted-foreground"})})]})]})}function Xe(){const{keyword:s}=D(),r=H(s,300),[t,i]=p.useState({page:1,page_size:30,keyword:"",section:""}),{data:l,isLoading:x}=y({queryKey:["articles",t,r],queryFn:async()=>(await V({...t,keyword:r})).data,staleTime:300*1e3}),{data:m}=y({queryKey:["category"],queryFn:async()=>(await A()).data,staleTime:300*1e3});return e.jsxs("div",{className:"flex h-full flex-col overflow-hidden",children:[e.jsx("div",{className:"sticky top-0 z-30 mb-2",children:e.jsx(O,{value:t,categories:m||[],onChange:c=>i(c)})}),e.jsxs("div",{className:"flex-1 overflow-auto",children:[x&&e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-3 text-muted-foreground",children:[e.jsx("div",{className:"h-12 w-12 animate-spin rounded-full border-4 border-primary border-t-transparent"}),e.jsx("p",{className:"text-sm",children:"åŠ è½½ä¸­..."})]})}),(!l?.items||l.items.length===0)&&e.jsx("div",{className:"flex h-full items-center justify-center p-8",children:e.jsxs("div",{className:"flex max-w-md flex-col items-center gap-4 text-center",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ve,{className:"h-20 w-20 text-muted-foreground/20"}),e.jsx(ue,{className:"absolute -right-1 -bottom-1 h-8 w-8 text-muted-foreground/30"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"æš‚æ— æ•°æ®"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"æ²¡æœ‰æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„æ–‡ç« ï¼Œè¯•è¯•è°ƒæ•´ç­›é€‰æ¡ä»¶æˆ–æœç´¢å…³é”®è¯"})]}),e.jsxs(g,{onClick:()=>i(c=>({...c,keyword:""})),variant:"outline",className:"gap-2",children:[e.jsx(Ge,{className:"h-4 w-4"}),"é‡ç½®ç­›é€‰"]})]})}),e.jsx("div",{className:"grid gap-2",children:l?.items.map(c=>e.jsx(K,{article:c},c.tid))})]}),e.jsx("div",{className:"sticky bottom-0 z-30 mt-2",children:e.jsx(ke,{page:t.page,total:l?.total||0,pageSize:t.page_size,onChange:c=>i(h=>({...h,page:c}))})})]})}function Ye(){const s=Y();return e.jsxs(e.Fragment,{children:[e.jsxs(te,{fixed:!0,children:[e.jsx(re,{}),e.jsxs("div",{className:"ms-auto flex items-center space-x-4",children:[e.jsx(oe,{}),e.jsx(ne,{}),e.jsx(ie,{})]})]}),e.jsx(le,{fixed:!0,children:s?e.jsx(Ue,{}):e.jsx(Xe,{})})]})}const zs=Ye;export{zs as component};
