import{b as h,r as p,o as u,j as e,c as f,B as n,s as j,t,L as g}from"./index-B01K6LtN.js";import{C as b,a as k,b as C,d as F,c as N,e as w}from"./card-C8S_LLSC.js";import{A as L}from"./auth-layout-CYtkX4B1.js";import{u as y,F as v,a as S,b as I,c as M,d as A,e as R}from"./form-CxRSSxqG.js";import{a as T}from"./zod-C1KCSxpg.js";import{g as B,c as E}from"./user-CRSCMw9j.js";import{I as P}from"./input-c0Q4JQol.js";import{c as _}from"./createLucideIcon-CCBfe0vc.js";import{L as q}from"./loader-circle-CqpSi6VW.js";import{A as z}from"./arrow-right-DSH9sgvw.js";import"./newspaper-DWNG5Kd-.js";import"./index-C2uM0dkt.js";import"./request-2_miQ1pQ.js";const D=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],G=_("refresh-ccw",D),H=u({token:j().min(1,"输入口令")});function U({className:c,...i}){const m=h(),[a,l]=p.useState(!1),r=y({resolver:T(H),defaultValues:{token:""}});async function d(s){l(!0);const o=await E(s.token);o.code===0?(t.success("前往注册账号"),m({to:"/sign-up",replace:!0})):t.error(o.message)}async function x(){const s=await B();s.code===0?t.success(s.message):t.error(s.message)}return e.jsx(v,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(d),className:f("grid gap-2",c),...i,children:[e.jsx(S,{control:r.control,name:"token",render:({field:s})=>e.jsxs(I,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(M,{children:"口令"}),e.jsxs(n,{type:"button",variant:"ghost",size:"sm",className:"h-8 px-2 text-xs text-muted-foreground",onClick:x,children:[e.jsx(G,{className:"mr-1 h-3 w-3"}),"随机生成"]})]}),e.jsx(A,{children:e.jsx(P,{placeholder:"输入或生成口令",...s})}),e.jsx(R,{})]})}),e.jsxs(n,{className:"mt-2 w-full",disabled:a,children:["继续",a?e.jsx(q,{className:"animate-spin"}):e.jsx(z,{})]})]})})}function V(){return e.jsx(L,{children:e.jsxs(b,{className:"gap-4",children:[e.jsxs(k,{children:[e.jsx(C,{className:"text-lg tracking-tight",children:"忘记密码"}),e.jsx(F,{children:"输入服务端生成的口令，来重置用户。注意：此操作会删除数据库用户信息,需重新注册"})]}),e.jsx(N,{children:e.jsx(U,{})}),e.jsx(w,{children:e.jsxs("p",{className:"mx-auto px-8 text-center text-sm text-balance text-muted-foreground",children:["没有账号?"," ",e.jsx(g,{to:"/sign-up",className:"underline underline-offset-4 hover:text-primary",children:"注册"}),"."]})})]})})}const ae=V;export{ae as component};
