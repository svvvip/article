import{r as u,j as t,u as oe,L as _,a as ie,c as A,B as le,b as ce,d as de,g as ue,O as pe}from"./index-B01K6LtN.js";import{u as E,S as xe,a as fe,b as D,c as S,d as C,D as z,e as U,C as V,f as K,g as he,h as ge,i as W,j as me,k as ve,l as je,m as be,n as Se,o as Ce,p as ye,s as F,q as we,r as Ne,t as Ae,L as Ee,v as Le,w as Me}from"./dropdown-menu-C5nmmplu.js";import{u as Y}from"./useLocation-DDcaZQ05.js";import{u as Re,c as _e,a as De,P,b as Pe,d as ke,e as w,f as Oe}from"./index-WrHNe2I8.js";import{B as $e}from"./badge-CnpEfJTD.js";import{P as k}from"./index-C2uM0dkt.js";import{A as Ie,a as Te,b as Be,c as Fe,d as qe,e as Ge,f as He}from"./alert-dialog-B9flnKzi.js";import{c as J}from"./createLucideIcon-CCBfe0vc.js";import"./index-BaKbMfrS.js";import"./index-CWOWhum8.js";import"./newspaper-DWNG5Kd-.js";import"./scroll-area-QD9Lh6Qq.js";import"./index-BdQq_4o_.js";import"./arrow-right-DSH9sgvw.js";import"./index-BWB9MiGf.js";const ze=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],Ue=J("chevrons-up-down",ze);const Ve=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Ke=J("log-out",Ve);var L="Collapsible",[We]=_e(L),[Ye,O]=We(L),Q=u.forwardRef((e,n)=>{const{__scopeCollapsible:a,open:r,defaultOpen:o,disabled:s,onOpenChange:i,...c}=e,[d,p]=Re({prop:r,defaultProp:o??!1,onChange:i,caller:L});return t.jsx(Ye,{scope:a,disabled:s,contentId:De(),open:d,onOpenToggle:u.useCallback(()=>p(g=>!g),[p]),children:t.jsx(P.div,{"data-state":I(d),"data-disabled":s?"":void 0,...c,ref:n})})});Q.displayName=L;var X="CollapsibleTrigger",Z=u.forwardRef((e,n)=>{const{__scopeCollapsible:a,...r}=e,o=O(X,a);return t.jsx(P.button,{type:"button","aria-controls":o.contentId,"aria-expanded":o.open||!1,"data-state":I(o.open),"data-disabled":o.disabled?"":void 0,disabled:o.disabled,...r,ref:n,onClick:Pe(e.onClick,o.onOpenToggle)})});Z.displayName=X;var $="CollapsibleContent",ee=u.forwardRef((e,n)=>{const{forceMount:a,...r}=e,o=O($,e.__scopeCollapsible);return t.jsx(ke,{present:a||o.open,children:({present:s})=>t.jsx(Je,{...r,ref:n,present:s})})});ee.displayName=$;var Je=u.forwardRef((e,n)=>{const{__scopeCollapsible:a,present:r,children:o,...s}=e,i=O($,a),[c,d]=u.useState(r),p=u.useRef(null),g=oe(n,p),l=u.useRef(0),x=l.current,f=u.useRef(0),m=f.current,h=i.open||c,j=u.useRef(h),y=u.useRef(void 0);return u.useEffect(()=>{const v=requestAnimationFrame(()=>j.current=!1);return()=>cancelAnimationFrame(v)},[]),w(()=>{const v=p.current;if(v){y.current=y.current||{transitionDuration:v.style.transitionDuration,animationName:v.style.animationName},v.style.transitionDuration="0s",v.style.animationName="none";const B=v.getBoundingClientRect();l.current=B.height,f.current=B.width,j.current||(v.style.transitionDuration=y.current.transitionDuration,v.style.animationName=y.current.animationName),d(r)}},[i.open,r]),t.jsx(P.div,{"data-state":I(i.open),"data-disabled":i.disabled?"":void 0,id:i.contentId,hidden:!h,...s,ref:g,style:{"--radix-collapsible-content-height":x?`${x}px`:void 0,"--radix-collapsible-content-width":m?`${m}px`:void 0,...e.style},children:h&&o})});function I(e){return e?"open":"closed"}var Qe=Q;function Xe({...e}){return t.jsx(Qe,{"data-slot":"collapsible",...e})}function Ze({...e}){return t.jsx(Z,{"data-slot":"collapsible-trigger",...e})}function et({...e}){return t.jsx(ee,{"data-slot":"collapsible-content",...e})}function tt({title:e,items:n}){const{state:a,isMobile:r}=E(),o=Y({select:s=>s.href});return t.jsxs(xe,{children:[t.jsx(fe,{children:e}),t.jsx(D,{children:n.map(s=>{const i=`${s.title}-${s.url}`;return s.items?a==="collapsed"&&!r?t.jsx(st,{item:s,href:o},i):t.jsx(at,{item:s,href:o},i):t.jsx(nt,{item:s,href:o},i)})})]})}function N({children:e}){return t.jsx($e,{className:"rounded-full px-1 py-0 text-xs",children:e})}function nt({item:e,href:n}){const{setOpenMobile:a}=E();return t.jsx(S,{children:t.jsx(C,{asChild:!0,isActive:b(n,e),tooltip:e.title,children:t.jsxs(_,{to:e.url,onClick:()=>a(!1),children:[e.icon&&t.jsx(e.icon,{}),t.jsx("span",{children:e.title}),e.badge&&t.jsx(N,{children:e.badge})]})})})}function at({item:e,href:n}){const{setOpenMobile:a}=E();return t.jsx(Xe,{asChild:!0,defaultOpen:b(n,e,!0),className:"group/collapsible",children:t.jsxs(S,{children:[t.jsx(Ze,{asChild:!0,children:t.jsxs(C,{tooltip:e.title,children:[e.icon&&t.jsx(e.icon,{}),t.jsx("span",{children:e.title}),e.badge&&t.jsx(N,{children:e.badge}),t.jsx(V,{className:"ms-auto transition-transform duration-200 group-data-[state=open]/collapsible:rotate-90 rtl:rotate-180"})]})}),t.jsx(et,{className:"CollapsibleContent",children:t.jsx(me,{children:e.items.map(r=>t.jsx(ve,{children:t.jsx(je,{asChild:!0,isActive:b(n,r),children:t.jsxs(_,{to:r.url,onClick:()=>a(!1),children:[r.icon&&t.jsx(r.icon,{}),t.jsx("span",{children:r.title}),r.badge&&t.jsx(N,{children:r.badge})]})})},r.title))})})]})})}function st({item:e,href:n}){return t.jsx(S,{children:t.jsxs(z,{children:[t.jsx(U,{asChild:!0,children:t.jsxs(C,{tooltip:e.title,isActive:b(n,e),children:[e.icon&&t.jsx(e.icon,{}),t.jsx("span",{children:e.title}),e.badge&&t.jsx(N,{children:e.badge}),t.jsx(V,{className:"ms-auto transition-transform duration-200 group-data-[state=open]/collapsible:rotate-90"})]})}),t.jsxs(K,{side:"right",align:"start",sideOffset:4,children:[t.jsxs(he,{children:[e.title," ",e.badge?`(${e.badge})`:""]}),t.jsx(ge,{}),e.items.map(a=>t.jsx(W,{asChild:!0,children:t.jsxs(_,{to:a.url,className:`${b(n,a)?"bg-secondary":""}`,children:[a.icon&&t.jsx(a.icon,{}),t.jsx("span",{className:"max-w-52 text-wrap",children:a.title}),a.badge&&t.jsx("span",{className:"ms-auto text-xs",children:a.badge})]})},`${a.title}-${a.url}`))]})]})})}function b(e,n,a=!1){return e===n.url||e.split("?")[0]===n.url||!!n?.items?.filter(r=>r.url===e).length||a&&e.split("/")[1]!==""&&e.split("/")[1]===n?.url?.split("/")[1]}function rt(e=null){const[n,a]=u.useState(e);return[n,o=>a(s=>s===o?null:o)]}function ot(e,n=[]){let a=[];function r(s,i){const c=u.createContext(i);c.displayName=s+"Context";const d=a.length;a=[...a,i];const p=l=>{const{scope:x,children:f,...m}=l,h=x?.[e]?.[d]||c,j=u.useMemo(()=>m,Object.values(m));return t.jsx(h.Provider,{value:j,children:f})};p.displayName=s+"Provider";function g(l,x){const f=x?.[e]?.[d]||c,m=u.useContext(f);if(m)return m;if(i!==void 0)return i;throw new Error(`\`${l}\` must be used within \`${s}\``)}return[p,g]}const o=()=>{const s=a.map(i=>u.createContext(i));return function(c){const d=c?.[e]||s;return u.useMemo(()=>({[`__scope${e}`]:{...c,[e]:d}}),[c,d])}};return o.scopeName=e,[r,it(o,...n)]}function it(...e){const n=e[0];if(e.length===1)return n;const a=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(s){const i=r.reduce((c,{useScope:d,scopeName:p})=>{const l=d(s)[`__scope${p}`];return{...c,...l}},{});return u.useMemo(()=>({[`__scope${n.scopeName}`]:i}),[i])}};return a.scopeName=n.scopeName,a}var M={exports:{}},R={};var q;function lt(){if(q)return R;q=1;var e=ie();function n(l,x){return l===x&&(l!==0||1/l===1/x)||l!==l&&x!==x}var a=typeof Object.is=="function"?Object.is:n,r=e.useState,o=e.useEffect,s=e.useLayoutEffect,i=e.useDebugValue;function c(l,x){var f=x(),m=r({inst:{value:f,getSnapshot:x}}),h=m[0].inst,j=m[1];return s(function(){h.value=f,h.getSnapshot=x,d(h)&&j({inst:h})},[l,f,x]),o(function(){return d(h)&&j({inst:h}),l(function(){d(h)&&j({inst:h})})},[l]),i(f),f}function d(l){var x=l.getSnapshot;l=l.value;try{var f=x();return!a(l,f)}catch{return!0}}function p(l,x){return x()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:c;return R.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:g,R}var G;function ct(){return G||(G=1,M.exports=lt()),M.exports}var dt=ct();function ut(){return dt.useSyncExternalStore(pt,()=>!0,()=>!1)}function pt(){return()=>{}}var T="Avatar",[xt]=ot(T),[ft,te]=xt(T),ne=u.forwardRef((e,n)=>{const{__scopeAvatar:a,...r}=e,[o,s]=u.useState("idle");return t.jsx(ft,{scope:a,imageLoadingStatus:o,onImageLoadingStatusChange:s,children:t.jsx(k.span,{...r,ref:n})})});ne.displayName=T;var ae="AvatarImage",se=u.forwardRef((e,n)=>{const{__scopeAvatar:a,src:r,onLoadingStatusChange:o=()=>{},...s}=e,i=te(ae,a),c=gt(r,s),d=Oe(p=>{o(p),i.onImageLoadingStatusChange(p)});return w(()=>{c!=="idle"&&d(c)},[c,d]),c==="loaded"?t.jsx(k.img,{...s,ref:n,src:r}):null});se.displayName=ae;var re="AvatarFallback",ht=u.forwardRef((e,n)=>{const{__scopeAvatar:a,delayMs:r,...o}=e,s=te(re,a),[i,c]=u.useState(r===void 0);return u.useEffect(()=>{if(r!==void 0){const d=window.setTimeout(()=>c(!0),r);return()=>window.clearTimeout(d)}},[r]),i&&s.imageLoadingStatus!=="loaded"?t.jsx(k.span,{...o,ref:n}):null});ht.displayName=re;function H(e,n){return e?n?(e.src!==n&&(e.src=n),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function gt(e,{referrerPolicy:n,crossOrigin:a}){const r=ut(),o=u.useRef(null),s=r?(o.current||(o.current=new window.Image),o.current):null,[i,c]=u.useState(()=>H(s,e));return w(()=>{c(H(s,e))},[s,e]),w(()=>{const d=l=>()=>{c(l)};if(!s)return;const p=d("loaded"),g=d("error");return s.addEventListener("load",p),s.addEventListener("error",g),n&&(s.referrerPolicy=n),typeof a=="string"&&(s.crossOrigin=a),()=>{s.removeEventListener("load",p),s.removeEventListener("error",g)}},[s,a,n]),i}var mt=ne,vt=se;function jt({className:e,...n}){return t.jsx(mt,{"data-slot":"avatar",className:A("relative flex size-8 shrink-0 overflow-hidden rounded-full",e),...n})}function bt({className:e,...n}){return t.jsx(vt,{"data-slot":"avatar-image",className:A("aspect-square size-full",e),...n})}function St(e){const{title:n,desc:a,children:r,className:o,confirmText:s,cancelBtnText:i,destructive:c,isLoading:d,disabled:p=!1,handleConfirm:g,...l}=e;return t.jsx(Ie,{...l,children:t.jsxs(Te,{className:A(o&&o),children:[t.jsxs(Be,{className:"text-start",children:[t.jsx(Fe,{children:n}),t.jsx(qe,{asChild:!0,children:t.jsx("div",{children:a})})]}),r,t.jsxs(Ge,{children:[t.jsx(He,{disabled:d,children:i??"Cancel"}),t.jsx(le,{variant:c?"destructive":"default",onClick:g,disabled:p||d,children:s??"Continue"})]})]})})}function Ct({open:e,onOpenChange:n}){const a=ce(),r=Y(),{auth:o}=de(),s=()=>{o.reset();const i=r.href;a({to:"/sign-in",search:{redirect:i},replace:!0})};return t.jsx(St,{open:e,onOpenChange:n,title:"Sign out",desc:"Are you sure you want to sign out? You will need to sign in again to access your account.",confirmText:"Sign out",destructive:!0,handleConfirm:s,className:"sm:max-w-sm"})}function yt({user:e}){const{isMobile:n}=E(),[a,r]=rt();return t.jsxs(t.Fragment,{children:[t.jsx(D,{children:t.jsx(S,{children:t.jsxs(z,{children:[t.jsx(U,{asChild:!0,children:t.jsxs(C,{size:"lg",className:"data-[state=open]:bg-sidebar-accent data-[state=open]:text-sidebar-accent-foreground",children:[t.jsx(jt,{className:"h-8 w-8 rounded-lg",children:t.jsx(bt,{src:e.avatar,alt:e.name})}),t.jsx("div",{className:"grid flex-1 text-start text-sm leading-tight",children:t.jsx("span",{className:"truncate font-semibold",children:e.name})}),t.jsx(Ue,{className:"ms-auto size-4"})]})}),t.jsx(K,{className:"w-(--radix-dropdown-menu-trigger-width) min-w-56 rounded-lg",side:n?"bottom":"right",align:"end",sideOffset:4,children:t.jsxs(W,{variant:"destructive",onClick:()=>r(!0),children:[t.jsx(Ke,{}),"Sign out"]})})]})})}),t.jsx(Ct,{open:!!a,onOpenChange:r})]})}function wt(){return t.jsx(D,{children:t.jsx(S,{children:t.jsx(C,{size:"lg",className:"gap-0 py-0 hover:bg-transparent active:bg-transparent",asChild:!0,children:t.jsx("div",{children:t.jsx("span",{className:"truncate font-bold",children:"文章管理"})})})})})}function Nt(){const{collapsible:e,variant:n}=be();return t.jsxs(Se,{collapsible:e,variant:n,children:[t.jsx(Ce,{children:t.jsx(wt,{})}),t.jsx(ye,{children:F.navGroups.map(a=>t.jsx(tt,{...a},a.title))}),t.jsx(we,{children:t.jsx(yt,{user:F.user})}),t.jsx(Ne,{})]})}function At(){return t.jsx("a",{className:"fixed start-44 z-999 -translate-y-52 bg-primary px-4 py-2 text-sm font-medium whitespace-nowrap text-primary-foreground opacity-95 shadow-sm transition hover:bg-primary/90 focus:translate-y-3 focus:transform focus-visible:ring-1 focus-visible:ring-ring",href:"#content",children:"Skip to Main"})}function Et({children:e}){const n=ue("sidebar_state")!=="false";return t.jsx(Ae,{children:t.jsx(Ee,{children:t.jsxs(Le,{defaultOpen:n,children:[t.jsx(At,{}),t.jsx(Nt,{}),t.jsx(Me,{className:A("@container/content","has-data-[layout=fixed]:h-svh","peer-data-[variant=inset]:has-data-[layout=fixed]:h-[calc(100svh-(var(--spacing)*4))]"),children:e??t.jsx(pe,{})})]})})})}const Ht=Et;export{Ht as component};
